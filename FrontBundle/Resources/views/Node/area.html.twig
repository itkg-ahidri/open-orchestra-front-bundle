<div id="{{ area.areaId }}" class="{{  area.htmlClass }}" >
    {% for subArea in area.areas %}
        {% include "OpenOrchestraFrontBundle:Node:area.html.twig" with {"area": subArea, 'nodeId': nodeId, 'parameters': parameters} only %}
    {% endfor %}
    {% for blockReference in area.blocks %}
        {% if blockReference.nodeId is sameas(0) %}
            {% set nodeReference = nodeId %}
        {% else %}
            {% set nodeReference = blockReference.nodeId %}
        {% endif %}
        {% set queryParams = parameters|merge({'nodeId': nodeReference, 'blockId': blockReference.blockId}) %}
        {{ render_esi(url('open_orchestra_front_block', queryParams)) }}
    {% endfor %}
</div>
